#!/bin/bash

# Hook post-commit para atualizar README.md automaticamente
echo "üîÑ Executando atualiza√ß√£o autom√°tica do README..."

# Navega para o diret√≥rio do projeto
cd "$(git rev-parse --show-toplevel)/frontend" || exit 1

# Verifica se o script existe
if [ ! -f "scripts/update-readme.cjs" ]; then
    echo "‚ùå Script update-readme.cjs n√£o encontrado"
    exit 1
fi

# Executa o script de atualiza√ß√£o
node scripts/update-readme.cjs

# Verifica se o README foi modificado
if git diff --quiet README.md; then
    echo "‚ÑπÔ∏è README.md j√° est√° atualizado"
else
    echo "üìù README.md foi atualizado - fazendo commit autom√°tico..."
    git add README.md
    git commit -m "docs: atualiza√ß√£o autom√°tica do README.md

ü§ñ Atualiza√ß√£o autom√°tica realizada pelo hook post-commit
- Estrutura do projeto atualizada
- Status de desenvolvimento atualizado
- Estat√≠sticas do projeto atualizadas"
fi

echo "‚úÖ Hook post-commit executado com sucesso"