#!/bin/bash

# Hook pre-push para garantir que README est√° atualizado antes do push
echo "üîç Verificando se README.md est√° atualizado..."

# Navega para o diret√≥rio do projeto
cd "$(git rev-parse --show-toplevel)/frontend" || exit 1

# Executa o script de atualiza√ß√£o
node scripts/update-readme.cjs

# Verifica se o README foi modificado
if git diff --quiet README.md; then
    echo "‚úÖ README.md est√° atualizado"
else
    echo "‚ö†Ô∏è README.md foi atualizado - √© necess√°rio fazer commit das mudan√ßas"
    echo "üìù Execute: git add README.md && git commit -m 'docs: atualiza√ß√£o autom√°tica do README.md'"
    echo "‚ùå Push cancelado - fa√ßa commit das mudan√ßas primeiro"
    exit 1
fi

echo "‚úÖ Hook pre-push executado com sucesso"